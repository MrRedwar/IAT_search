---
title: " Основы обработки данных с помощью R и Dplyr"
author: "mironopavel@yandex.ru"
format: 
  md: 
    output-file: README.md
---

##Цель работы

 1. Развить практические навыки использования языка программирования R для
 обработки данных
 2. Закрепить знания базовых типов данных языка R
 3. Развить практические навыки использования функций обработки данных пакета
 dplyr – функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1. Программное обеспечение Windows 10 Pro
2. Rstudio Desktop
3. Интерпретатор языка R 4.5.1
4. Програмный пакет dplyr
5. Набор данных starwars

## План

1. Установить пакет dplyr     
2. Выполнить курс   

## Шаги

1 Установить пакет dplyr



```{r}
library(dplyr)
```

2.  Проанализировать встроенный в пакет dplyr набор данных языка R и ответить на вопросы:

  2.1 Сколько строк в датафрейме?
  
```{r}
starwars %>% nrow()
```
  
  2.2  Сколько столбцов в датафрейме?
  
```{r}
starwars %>% ncol()
```
  
  2.3  Как просмотреть примерный вид датафрейма?

```{r}
starwars %>% glimpse()
```
  
  2.4  Сколько уникальных рас персонажей (species) представлено в данных?
  
```{r}
starwars$species %>% unique() %>% length()
```

  2.5  Найти самого высокого персонажа.
  
```{r}
starwars %>% filter(height == max(height, na.rm = TRUE)) %>% select(name, height)
```

  2.6 Найти всех персонажей ниже 170
  
```{r}
starwars %>% filter(height < 170) %>% select(name, height)
```

  2.7  Подсчитать ИМТ (индекс массы тела) для всех персонажей. ИМТ подсчитать по
 формуле
 
```{r}
starwars <- starwars %>% mutate(imt = mass / ((height / 100) ^ 2))

starwars$imt
```

  2.8  Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению
 массы (mass) к росту (height) персонажей.
 
```{r}
starwars %>% mutate(stretch = mass / height) %>% arrange(desc(stretch)) %>% head(10) %>% select(name, mass, height, stretch)
```

  2.9  Найти средний возраст персонажей каждой расы вселенной Звездных войн.
  
```{r}
 starwars %>% mutate(age = 100 + birth_year) %>% group_by(species) %>% summarise(avg_age = mean(age, na.rm = TRUE), count = n()) %>% filter(!is.na(avg_age)) %>% arrange(desc(avg_age))
```

  2.10 . Найти самый распространенный цвет глаз персонажей вселенной Звездных
 войн.
  
```{r}
starwars %>% count(eye_color, sort = TRUE) %>% head(1)
```
 
 2.11 Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.
 
```{r}
starwars %>% mutate(name_length = nchar(name)) %>% group_by(species) %>% summarise(avg_name_length = mean(name_length, na.rm = TRUE))
```

## Оценка результата

 В результате лабораторной работы мы поняли как работают функции пакета dpylr при работе с данными.

## Вывод

Таким образом, мы научились мы научились выполнять базовые функции пакета dpylr.